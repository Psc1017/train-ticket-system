# 复杂折扣系统 - 简单解释

## 🎯 核心概念

这套系统就像是一个"智能定价器"，会根据4个因素来决定最终票价：

### 1️⃣ 票价浮动情景（基础价格调整）
- **10%浮动**：原价基础上浮10%
- **20%浮动**：原价基础上浮20%  
- **30%浮动**：原价基础上浮30%

### 2️⃣ 出发日期类型（什么时候出发）
- **工作日**：周一到周五
- **休息日**：周六、周日
- **节假日**：法定节假日

### 3️⃣ 发车时段（几点发车）
- **高峰时段**：人多的时段（如早高峰、晚高峰）
- **平峰时段**：人适中的时段
- **低谷时段**：人少的时段

### 4️⃣ 提前购票天数（提前多久买票）
- **1-3天**：提前1到3天买票
- **4-9天**：提前4到9天买票
- **10天及以上**：提前10天或更久买票

### 5️⃣ 旅行时间类型（K值）
- **K=0**：某种旅行时间类型
- **K=1**：另一种旅行时间类型

---

## 🔄 计算流程

1. **选择浮动情景** → 确定基础价格调整幅度
2. **输入出发日期** → 系统判断是工作日/休息日/节假日
3. **输入发车时间** → 系统判断是高峰/平峰/低谷时段
4. **选择提前天数** → 确定提前购票的折扣级别
5. **选择K值** → 确定旅行时间类型
6. **系统查表** → 根据这5个因素查找对应的折扣率
7. **计算最终价格** → 原价 × 折扣率 = 最终价格

---

## 📊 举例说明

假设：
- 原价：100元
- 选择：20%浮动 + 工作日 + 平峰时段 + 提前7天 + K=0

系统会：
1. 查20%浮动折扣表
2. 找到"工作日-平峰时段-K=0-提前4-9天"对应的折扣率：0.83
3. 计算：100 × 0.83 = 83元

---

## 🎮 实际使用

在系统中：
1. 打开"复杂折扣"开关
2. 选择"20%浮动"
3. 选择"K=0"
4. 输入发车时间"08:30"
5. 选择出发日期（系统自动判断工作日/休息日）
6. 查询票价，系统自动计算折扣

---

## 💡 为什么这样设计？

这套系统模拟了真实的高铁定价策略：
- **动态定价**：根据需求调整价格
- **时段差异**：不同时段不同价格
- **提前优惠**：越早买越便宜
- **日期敏感**：工作日和节假日价格不同

这样可以让实验更贴近真实的购票场景！
